<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>permuteChildren()</title>
   
</head>
<body>
     <ul>
        <li>Apple
            <ul>
                <li>Golden</li>
                <li>Lady</li>
             </ul>
         </li>
         <li>Pear</li>
         <li>Strawberry</li>
         <li>Lemon</li>
         This/these text node(s) will be removed by permuteChildren()
     </ul>
</body>
<script>
    const isElement = function(object){
        try { 
            return (object.constructor.__proto__.prototype.constructor.name)?true:false; 
        }catch(e){ 
            return false; 
        } 
    }
    const cleanNodes = function(nodes){
        let newUL = document.createElement('UL');
        for (var i = 0; i < nodes.childNodes.length; i++) {
            if (nodes.childNodes[i].nodeName == 'LI') {
                 newUL.appendChild(nodes.childNodes[i].cloneNode(nodes.childNodes[i]));
            }
        }
        return newUL = randomNode(newUL);
    } 

    const randomNode = function(node){
        let repeat = [];
        const min = 0;
        let max = node.childElementCount;
        let newULR = document.createElement('UL');
        let insert = 0;
        for (var i = 0; insert < max; i++) {
            let pos = Math.floor(Math.random() * (max - min)) + min;
            if (node.childNodes[pos].nodeName == 'LI' && !repeat.includes(pos) ) {
                let aux = node.childNodes[pos].cloneNode(node.childNodes[pos]);
                newULR.appendChild(aux);
                repeat.push(pos);
                insert++;
            }
        }
        return newULR;
    }

    let parent = document.querySelector('UL');
    let ej = document.createElement('UL');
    parent.replaceWith(cleanNodes(parent));
</script>
</html>